{"version":3,"sources":["Components/ToolBar.js","Components/NewTaskHandler.js","Components/CategoryRadio.js","Components/TaskElement.js","Components/MainContainer.js","index.js"],"names":["ToolBar","tasks","setTasks","inputRef","useRef","getUserId","userId","current","value","alert","className","type","placeholder","ref","onClick","localStorage","setItem","JSON","stringify","userTasks","parse","getItem","filter","task","checked","taskId","NewTaskHandler","content","taskElem","id","CategoryRadio","category","setCategory","name","onChange","e","target","TaskElement","contentRef","editContentRef","editRootRef","useState","isChecked","setIsChecked","isEditing","setIsEditing","switchEditMode","classList","toggle","focus","innerText","elem","MainContainer","getVisibleTasks","map","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c2689efa.chunk.js","sourcesContent":["import { useRef } from 'react';\r\nimport './ToolBar.css';\r\n\r\n// 工具列， 掌管使用者名稱、list 的存取、清空已完成 tasks\r\nfunction ToolBar({ tasks, setTasks }) {\r\n  const inputRef = useRef(null);  // 透過 ref 建立參考 input element 的途徑\r\n\r\n  // 清空鍵，清空已完成的 task\r\n  function onClearBtnClicked() {\r\n    setTasks(tasks.filter(task => !task.checked));\r\n  }\r\n\r\n  // 儲存鍵，依據使用者名稱將當前的 tasks 進行 localStorage\r\n  function onSaveBtnClicked() {\r\n    const userId = getUserId();\r\n    if (!userId) return;\r\n    localStorage.setItem(userId, JSON.stringify(tasks));\r\n  }\r\n\r\n  // 讀取鍵，依據使用者名稱讀取之前儲存的 tasks\r\n  function onLoadBtnClicked() {\r\n    const userId = getUserId();\r\n    if (!userId) return;\r\n    const userTasks = JSON.parse(localStorage.getItem(userId));\r\n    if (!userTasks) {\r\n      alert('User tasks not found :3');\r\n      return;\r\n    }\r\n    setTasks(userTasks);\r\n  }\r\n\r\n  // 透過 ref 途徑獲取 input value\r\n  function getUserId() {\r\n    const userId = inputRef.current.value;\r\n    if (!userId) {\r\n      alert('Please input your user ID :3');\r\n      return '';\r\n    }\r\n    return userId;\r\n  }\r\n\r\n  return (\r\n    <div className=\"tool-bar\">\r\n      <span className=\"tool-id-icon\">🗿</span>\r\n      <input className=\"tool-id common-concave\" type=\"text\" placeholder=\"User ID\" ref={inputRef}></input>\r\n      <button className=\"tool-btn common-btn\" onClick={onSaveBtnClicked}>Save 💾</button>\r\n      <button className=\"tool-btn common-btn\" onClick={onLoadBtnClicked}>Load 📂</button>\r\n      <button className=\"tool-btn common-btn\" onClick={onClearBtnClicked}>Clear Done 🗑️</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ToolBar;\r\n","import { useRef } from 'react';\r\nimport './NewTaskHandler.css';\r\n\r\n// 設 key 用\r\nlet taskId = 0;\r\n\r\n// 處理新增 task 的相關內容\r\nfunction NewTaskHandler({ tasks, setTasks }) {\r\n  const inputRef = useRef(null);  // 透過 ref 建立參考 input element 的途徑\r\n\r\n  // 新增鍵，依照輸入的內容建立新的 task\r\n  function onNewTaskBtnClicked() {\r\n    const content = inputRef.current.value;\r\n    if (!content) {\r\n      alert('Please write a title for the new task :3');\r\n      return;\r\n    }\r\n    inputRef.current.value = '';\r\n    const taskElem = {\r\n      id: taskId,\r\n      content,\r\n      checked: false,\r\n    }\r\n    setTasks([...tasks, taskElem]);\r\n    taskId++;\r\n  }\r\n\r\n  return (\r\n    <div className=\"new-task-handler\">\r\n      <span className=\"new-task-icon\">✏️</span>\r\n      <input\r\n        className=\"new-task-input common-concave\"\r\n        type=\"text\"\r\n        ref={inputRef}\r\n        placeholder=\"Write a title for the new task\"\r\n      />\r\n      <button className=\"new-task-btn common-btn\" onClick={onNewTaskBtnClicked} >📄</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewTaskHandler;\r\n","import './CategoryRadio.css';\r\n\r\n// 管理並回傳 radio 狀態，為了實現點擊 label 也能視為有效輸入，套了比較多層\r\nfunction CategoryRadio({ category, setCategory }) {\r\n  return (\r\n    <div className=\"category-radio\">\r\n      <label className=\"input-category-cover\">\r\n        <input\r\n          className=\"input-category category-all\"\r\n          value=\"all\"\r\n          name=\"category\"\r\n          type=\"radio\"\r\n          onChange={e => setCategory(e.target.value)}\r\n          checked={category === 'all'}\r\n        /> All\r\n      </label>\r\n\r\n      <label className=\"input-category-cover\">\r\n        <input\r\n          className=\"input-category\"\r\n          value=\"todo\"\r\n          name=\"category\"\r\n          type=\"radio\"\r\n          onChange={e => setCategory(e.target.value)}\r\n          checked={category === 'todo'}\r\n        /> Todo\r\n      </label>\r\n\r\n      <label className=\"input-category-cover\">\r\n        <input\r\n          className=\"input-category\"\r\n          value=\"done\"\r\n          name=\"category\"\r\n          type=\"radio\"\r\n          onChange={e => setCategory(e.target.value)}\r\n          checked={category === 'done'}\r\n        /> Done\r\n      </label>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CategoryRadio;\r\n","import { useState, useRef } from 'react';\r\nimport './TaskElement.css';\r\n\r\nfunction TaskElement({ task, tasks, setTasks }) {\r\n  const contentRef = useRef(null);      // 透過 ref 建立參考 task content 的途徑\r\n  const editContentRef = useRef(null);  // 透過 ref 建立參考 edit content 的途徑\r\n  const editRootRef = useRef(null);     // 透過 ref 建立參考 edit 介面 root 的途徑\r\n\r\n  const [isChecked, setIsChecked] = useState(task.checked); // 該 task 是否已完成 \r\n  const [isEditing, setIsEditing] = useState(false);        // 該 task 是否正在編輯\r\n\r\n  // 完成、復原鍵，將 task 的狀態在完成與未完成之間切換 (toggle)\r\n  function onCheckBtnClicked() {\r\n    contentRef.current.classList.toggle('checked-text');\r\n    task.checked = !task.checked;\r\n    setIsChecked(!isChecked);\r\n    setTasks([...tasks]);\r\n  }\r\n\r\n  // 刪除鍵，將 task 從 tasks 中刪除\r\n  function onDelBtnClicked() {\r\n    setTasks(tasks.filter(elem => elem.id !== task.id));\r\n  }\r\n\r\n  // 啟用編輯，將 task 切換到編輯狀態\r\n  function onEditStart() {\r\n    if (isEditing) return;\r\n    switchEditMode();                             // 將顯示狀態切換到編輯模式\r\n    editContentRef.current.value = task.content;  // 將 task.content 注入到 input 欄位的 value 中\r\n    editContentRef.current.focus();               // 將游標 focus 在 input 欄位\r\n    setIsEditing(true);\r\n  }\r\n\r\n  // 結束編輯，將 task 切換回一般狀態\r\n  function onEditFinish() {\r\n    if (!isEditing) return;\r\n    switchEditMode();                              // 將顯示狀態切回到一般模式\r\n    task.content = editContentRef.current.value;   // 將 input 欄位的 value 傳回到 task.content 中\r\n    contentRef.current.innerText = task.content;   // 將 task.content 與 innerText 同步\r\n    setIsEditing(false);\r\n  }\r\n\r\n  // 切換編輯狀態，透過 class name 切換顯示內容 (非主流 react 作法，當時還在適應中，待改善)\r\n  function switchEditMode() {\r\n    contentRef.current.classList.toggle('hidden');\r\n    editRootRef.current.classList.toggle('hidden');\r\n  }\r\n\r\n  // 透過判斷 task.checked 決定大部分的顯示樣貌\r\n  return (\r\n    <div className=\"task-element\">\r\n      <div className=\"common-concave\"></div>\r\n      <div className=\"task-content\">\r\n        <div className=\"task-sign\">{task.checked ? '🏁' : '🚩'}</div>\r\n        <div \r\n          className={task.checked ? \"task-text checked-text\" : \"task-text\"}\r\n          ref={contentRef} \r\n          onClick={onEditStart}\r\n        >{task.content}</div>\r\n        <div className=\"edit-root hidden\" ref={editRootRef}>\r\n          <input className=\"edit-text common-concave\" type=\"text\" ref={editContentRef} />\r\n          <div className=\"edit-blocker\" onClick={onEditFinish}></div>\r\n        </div>\r\n        <button className=\"task-btn common-btn\" onClick={onCheckBtnClicked}>{task.checked ? '↩️' : '✔️'}</button>\r\n        <button className=\"task-btn common-btn\" onClick={onDelBtnClicked}>❌</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TaskElement;\r\n","import { useState } from 'react';\r\nimport './MainContainer.css';\r\nimport ToolBar from './ToolBar';\r\nimport NewTaskHandler from './NewTaskHandler';\r\nimport CategoryRadio from './CategoryRadio';\r\nimport TaskElement from './TaskElement';\r\n\r\n// todolist 本體，子元件依照功能拆成四個部分\r\nfunction MainContainer() {\r\n  const [category, setCategory] = useState('all');  // radio 狀態\r\n  const [tasks, setTasks] = useState([]);           // tasks 狀態\r\n\r\n  // 依條件回傳需要被顯示的 tasks (條件由 radio input 決定)\r\n  function getVisibleTasks() {\r\n    switch (category) {\r\n      case 'todo':\r\n        return tasks.filter(task => !task.checked);\r\n      case 'done':\r\n        return tasks.filter(task => task.checked);\r\n      default:\r\n        return tasks;\r\n    }\r\n  }\r\n\r\n  // ToolBar - 掌管使用者名稱、list 的存取、清空已完成 tasks\r\n  // NewTaskHandler - 處理新增 task 的相關內容\r\n  // CategoryRadio - 管理並回傳 radio 狀態\r\n  // TaskElement - task 的相關內容都在此元件中\r\n  return (\r\n    <div className=\"list-container\">\r\n      <div className=\"list-window common-convex\">\r\n        <div className=\"window-title\">📝Todo List</div>\r\n        <ToolBar {...{ tasks }} {...{ setTasks }} />\r\n        <NewTaskHandler {...{ tasks }} {...{ setTasks }} />\r\n        <CategoryRadio {...{ category }} {...{ setCategory }} />\r\n        <div className=\"tasks-container\">{\r\n          // 透過 getVisibleTasks 從 tasks 過濾出需要被顯示的 task\r\n          getVisibleTasks().map(task =>\r\n            <TaskElement\r\n              key={task.id}\r\n              {...{ task }}\r\n              {...{ tasks }}\r\n              {...{ setTasks }}\r\n            />\r\n          )\r\n        }</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainContainer;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './normalize.css';\nimport './index.css';\nimport MainContainer from './Components/MainContainer';\n\nReactDOM.render(\n  <React.StrictMode>\n    <MainContainer />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}